import os, sys
import Loads_data


path = 'C:\\Users\\Сергей\\PycharmProjects\\bot\\preserved'
dirs = os.listdir( path )

for file in dirs:
    print(file[5:7],file[8:10],file[11:16])



listok = {
    "year_2018":{
        "month_1":{
            "a_week_1":{'01', '02', '03', '04', '05', '06', '07'},
            "a_week_2":{'08', '09', '10', '11', '12', '13', '14'},
            "a_week_3":{'15', '16', '17', '18', '19', '20', '21'},
            "a_week_4":{'22', '23', '24', '25', '26', '27', '28'},
            "a_week_5":{'29', '30', '31'}
        },
        "month_2":{
            "a_week_1":{'01', '02', '03', '04'},
            "a_week_2":{'05', '06', '07', '08', '09', '10', '11'},
            "a_week_3":{'12', '13', '14', '15', '16', '17', '18'},
            "a_week_4":{'19', '20', '21', '22', '23', '24', '25',},
            "a_week_5":{'26', '27', '28'}
        },
        "month_3":{
            "a_week_1":{'01', '02', '03', '04'},
            "a_week_2":{'05', '06', '07', '08', '09', '10', '11'},
            "a_week_3":{'12', '13', '14', '15', '16', '17', '18'},
            "a_week_4":{'19', '20', '21', '22', '23', '24', '25'},
            "a_week_5":{'26', '27', '28', '29', '30', '31'}
        },
        "month_4":{
            "a_week_1":{'01'},
            "a_week_2":{'02', '03', '04', '05', '06', '07', '08'},
            "a_week_3":{'09', '10', '11', '12', '13', '14', '15'},
            "a_week_4":{'16', '17', '18', '19', '20', '21', '22'},
            "a_week_5":{'23', '24', '25', '26', '27', '28', '29'},
            "a_week_6":{'30'}
        },
        "month_5":{
            "a_week_1":{'01', '02', '03', '04', '05', '06'},
            "a_week_2":{'07', '08', '09', '10', '11', '12', '13'},
            "a_week_3":{'14', '15', '16', '17'
                                          '+', '18', '19', '20'},
            "a_week_4":{'21', '22', '23', '24', '25', '26', '27'},
            "a_week_5":{'28', '29', '30', '31'}
        },
        "month_6":{
            "a_week_1":{'01', '02', '03'},
            "a_week_2":{'04', '05', '06', '07', '08', '09', '10'},
            "a_week_3":{'11', '12', '13', '14', '15', '16', '17'},
            "a_week_4":{'18', '19', '20', '21', '22', '23', '24'},
            "a_week_5":{'26', '27', '28', '29', '30'}
        },
        "month_7":{
            "a_week_1":{'01'},
            "a_week_2":{'02', '03', '04', '05', '06', '07', '08'},
            "a_week_3":{'09','10', '11', '12', '13', '14', '15'},
            "a_week_4":{'16', '17', '18', '19', '20', '21', '22'},
            "a_week_5":{'23', '24', '25', '26', '27', '28', '29'},
            "a_week_6":{'30', '31'}
        },
        "month_8":{
            "a_week_1":{'01', '02', '03', '04', '05'},
            "a_week_2":{'06', '07', '08', '09', '10', '11', '12'},
            "a_week_3":{'13', '14', '15', '16', '17', '18', '19'},
            "a_week_4":{'20', '21', '22', '23', '24', '25', '26'},
            "a_week_5":{'27', '28', '29', '30', '31'}
        },
        "month_9":{
            "a_week_1":{'01', '02'},
            "a_week_2":{'03', '04', '05', '06', '07', '08', '09'},
            "a_week_3":{'10', '11', '12', '13', '14', '15', '16'},
            "a_week_4":{'17', '18', '19', '20', '21', '22', '23'},
            "a_week_5":{'24', '25', '26', '27', '28', '29', '30'}
        },
        "month_10":{
            "a_week_1":{'01', '02', '03', '04', '05', '06', '07'},
            "a_week_2":{'08', '09', '10', '11', '12', '13', '14'},
            "a_week_3":{'15', '16', '17', '18', '19', '20', '21'},
            "a_week_4":{'22', '23', '24', '25', '26', '27', '28'},
            "a_week_5":{'29', '30', '31'}
        },
        "month_11":{
            "a_week_1":{'01', '02', '03', '04'},
            "a_week_2":{'05', '06', '07', '08', '09', '10', '11'},
            "a_week_3":{'12', '13', '14', '15', '16', '17', '18'},
            "a_week_4":{'19', '20', '21', '22', '23', '24', '25'},
            "a_week_5":{'26', '27', '28', '29', '30'}
        },
        "month_12":{
            "a_week_1":{'01', '02'},
            "a_week_2":{'03', '04', '05', '06', '07', '08', '09'},
            "a_week_3":{'10', '11', '12', '13', '14', '15', '16'},
            "a_week_4":{'17', '18', '19', '20', '21', '22', '23'},
            "a_week_5":{'24', '25', '26', '27', '28', '29', '30'},
            "a_week_6":{'31'}
        }
    }
}

out = {
    "2018": {
        "01": [],
        "02": [],
        "03": [],
        "04": [],
        "05": [],
        "06": [],
        "07": [],
        "08": [],
        "09": [],
        "10": [],
        "11": [],
        "12": []
    }
}

current_week = []
current_day_list = []
current_day = None

for file in dirs:
    m = file[5:7]
    d = file[8:10]
    force_add = False

    if current_day == None:
        current_day = d

    if current_day == d:
        current_day_list.append(file)
    else:
        current_week.append(current_day_list)
        current_day_list = []
        current_day = d
        force_add = True

    if len(current_week) % 7 == 0 and len(current_week) > 0 or force_add:
        try:
            out["2018"][m].append(current_week)
        except Exception as ex:
            print(str(ex))
            out["2018"][m] = [current_week]
        current_week = []
        force_add = False

if current_day_list:
    current_week.append(current_day_list)

if current_week:
    out["2018"][dirs[-1][5:7]].append(current_week)

print(out)